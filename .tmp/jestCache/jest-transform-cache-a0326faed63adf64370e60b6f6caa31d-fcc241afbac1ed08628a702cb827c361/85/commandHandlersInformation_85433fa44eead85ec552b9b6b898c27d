db3963ae4dcb7bc278cf1da4866ca297
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const commandNotRegisteredError_1 = __importDefault(require("@shared/domain/bus/command/commandNotRegisteredError"));
class CommandHandlersInformation {
    constructor(commandHandlers) {
        this.commandHandlersMap = this.formatHandlers(commandHandlers);
    }
    // eslint-disable-next-line class-methods-use-this
    formatHandlers(commandHandlers) {
        const handlersMap = new Map();
        commandHandlers.forEach((commandHandler) => {
            handlersMap.set(commandHandler.subscribedTo(), commandHandler);
        });
        return handlersMap;
    }
    search(command) {
        const commandHandler = this.commandHandlersMap.get(command.constructor);
        if (!commandHandler) {
            throw new commandNotRegisteredError_1.default(command);
        }
        return commandHandler;
    }
}
exports.default = CommandHandlersInformation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvb3B0aXZhbWVkaWEvRG9jdW1lbnRzL1BlcnNvbmFsL2JhbmstYWNjb3VudC1tYW5hZ2VyL3NlcnZlci9jb250ZXh0cy9zaGFyZWQvaW5mcmFzdHJ1Y3R1cmUvY29tbWFuZEJ1cy9jb21tYW5kSGFuZGxlcnNJbmZvcm1hdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUVBLHFIQUE2RjtBQUU3RixNQUFxQiwwQkFBMEI7SUFHM0MsWUFBWSxlQUErQztRQUN2RCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBRUQsa0RBQWtEO0lBQzFDLGNBQWMsQ0FDbEIsZUFBK0M7UUFFL0MsTUFBTSxXQUFXLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUU5QixlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxFQUFFLEVBQUU7WUFDdkMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFFLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDbkUsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLFdBQVcsQ0FBQztJQUN2QixDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQWdCO1FBQzFCLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRXhFLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDakIsTUFBTSxJQUFJLG1DQUF5QixDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ2hEO1FBRUQsT0FBTyxjQUFjLENBQUM7SUFDMUIsQ0FBQztDQUNKO0FBN0JELDZDQTZCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9vcHRpdmFtZWRpYS9Eb2N1bWVudHMvUGVyc29uYWwvYmFuay1hY2NvdW50LW1hbmFnZXIvc2VydmVyL2NvbnRleHRzL3NoYXJlZC9pbmZyYXN0cnVjdHVyZS9jb21tYW5kQnVzL2NvbW1hbmRIYW5kbGVyc0luZm9ybWF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21tYW5kIGZyb20gJ0BzaGFyZWQvZG9tYWluL2J1cy9jb21tYW5kL2NvbW1hbmQnO1xuaW1wb3J0IHsgQ29tbWFuZEhhbmRsZXIgfSBmcm9tICdAc2hhcmVkL2RvbWFpbi9idXMvY29tbWFuZC9jb21tYW5kSGFuZGxlcic7XG5pbXBvcnQgQ29tbWFuZE5vdFJlZ2lzdGVyZWRFcnJvciBmcm9tICdAc2hhcmVkL2RvbWFpbi9idXMvY29tbWFuZC9jb21tYW5kTm90UmVnaXN0ZXJlZEVycm9yJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWFuZEhhbmRsZXJzSW5mb3JtYXRpb24ge1xuICAgIHByaXZhdGUgY29tbWFuZEhhbmRsZXJzTWFwOiBNYXA8Q29tbWFuZCwgQ29tbWFuZEhhbmRsZXI8Q29tbWFuZD4+O1xuXG4gICAgY29uc3RydWN0b3IoY29tbWFuZEhhbmRsZXJzOiBBcnJheTxDb21tYW5kSGFuZGxlcjxDb21tYW5kPj4pIHtcbiAgICAgICAgdGhpcy5jb21tYW5kSGFuZGxlcnNNYXAgPSB0aGlzLmZvcm1hdEhhbmRsZXJzKGNvbW1hbmRIYW5kbGVycyk7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgICBwcml2YXRlIGZvcm1hdEhhbmRsZXJzKFxuICAgICAgICBjb21tYW5kSGFuZGxlcnM6IEFycmF5PENvbW1hbmRIYW5kbGVyPENvbW1hbmQ+PlxuICAgICk6IE1hcDxDb21tYW5kLCBDb21tYW5kSGFuZGxlcjxDb21tYW5kPj4ge1xuICAgICAgICBjb25zdCBoYW5kbGVyc01hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICBjb21tYW5kSGFuZGxlcnMuZm9yRWFjaCgoY29tbWFuZEhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZXJzTWFwLnNldChjb21tYW5kSGFuZGxlci5zdWJzY3JpYmVkVG8oKSwgY29tbWFuZEhhbmRsZXIpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaGFuZGxlcnNNYXA7XG4gICAgfVxuXG4gICAgcHVibGljIHNlYXJjaChjb21tYW5kOiBDb21tYW5kKTogQ29tbWFuZEhhbmRsZXI8Q29tbWFuZD4ge1xuICAgICAgICBjb25zdCBjb21tYW5kSGFuZGxlciA9IHRoaXMuY29tbWFuZEhhbmRsZXJzTWFwLmdldChjb21tYW5kLmNvbnN0cnVjdG9yKTtcblxuICAgICAgICBpZiAoIWNvbW1hbmRIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29tbWFuZE5vdFJlZ2lzdGVyZWRFcnJvcihjb21tYW5kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb21tYW5kSGFuZGxlcjtcbiAgICB9XG59XG4iXSwidmVyc2lvbiI6M30=