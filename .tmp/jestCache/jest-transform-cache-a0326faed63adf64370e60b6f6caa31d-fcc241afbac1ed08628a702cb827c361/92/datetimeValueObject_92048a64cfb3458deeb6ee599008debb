e89415bf605b11340ded03b5d1d4e627
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const moment_1 = __importDefault(require("moment"));
const invalidArgumentError_1 = __importDefault(require("@shared/domain/invalidArgumentError"));
const stringValueObject_1 = __importDefault(require("@shared/domain/stringValueObject"));
class DatetimeValueObject extends stringValueObject_1.default {
    constructor(datetime) {
        DatetimeValueObject.ensureIsValidDate(datetime);
        super((0, moment_1.default)(datetime).toISOString());
    }
    static ensureIsValidDate(value) {
        const date = (0, moment_1.default)(value);
        if (!date.isValid()) {
            throw new invalidArgumentError_1.default(`<${this.name}> doesn't allow the value <${value}>`);
        }
    }
    static now() {
        return new DatetimeValueObject(new Date(Date.now()).toISOString());
    }
    toSeconds() {
        return (0, moment_1.default)(this.value).unix();
    }
}
exports.default = DatetimeValueObject;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvb3B0aXZhbWVkaWEvRG9jdW1lbnRzL1BlcnNvbmFsL2JhbmstYWNjb3VudC1tYW5hZ2VyL3NlcnZlci9jb250ZXh0cy9zaGFyZWQvZG9tYWluL2RhdGV0aW1lVmFsdWVPYmplY3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBNEI7QUFDNUIsK0ZBQXVFO0FBQ3ZFLHlGQUFpRTtBQUVqRSxNQUFxQixtQkFBb0IsU0FBUSwyQkFBaUI7SUFDOUQsWUFBWSxRQUFpQjtRQUN6QixtQkFBbUIsQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVoRCxLQUFLLENBQUMsSUFBQSxnQkFBTSxFQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVPLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxLQUFjO1FBQzNDLE1BQU0sSUFBSSxHQUFHLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQztRQUUzQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFO1lBQ2pCLE1BQU0sSUFBSSw4QkFBb0IsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLDhCQUE4QixLQUFLLEdBQUcsQ0FBQyxDQUFDO1NBQ3ZGO0lBQ0wsQ0FBQztJQUVELE1BQU0sQ0FBQyxHQUFHO1FBQ04sT0FBTyxJQUFJLG1CQUFtQixDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELFNBQVM7UUFDTCxPQUFPLElBQUEsZ0JBQU0sRUFBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDckMsQ0FBQztDQUNKO0FBdEJELHNDQXNCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9vcHRpdmFtZWRpYS9Eb2N1bWVudHMvUGVyc29uYWwvYmFuay1hY2NvdW50LW1hbmFnZXIvc2VydmVyL2NvbnRleHRzL3NoYXJlZC9kb21haW4vZGF0ZXRpbWVWYWx1ZU9iamVjdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnQHNoYXJlZC9kb21haW4vaW52YWxpZEFyZ3VtZW50RXJyb3InO1xuaW1wb3J0IFN0cmluZ1ZhbHVlT2JqZWN0IGZyb20gJ0BzaGFyZWQvZG9tYWluL3N0cmluZ1ZhbHVlT2JqZWN0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZXRpbWVWYWx1ZU9iamVjdCBleHRlbmRzIFN0cmluZ1ZhbHVlT2JqZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRldGltZT86IHN0cmluZykge1xuICAgICAgICBEYXRldGltZVZhbHVlT2JqZWN0LmVuc3VyZUlzVmFsaWREYXRlKGRhdGV0aW1lKTtcblxuICAgICAgICBzdXBlcihtb21lbnQoZGF0ZXRpbWUpLnRvSVNPU3RyaW5nKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGVuc3VyZUlzVmFsaWREYXRlKHZhbHVlPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBtb21lbnQodmFsdWUpO1xuXG4gICAgICAgIGlmICghZGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihgPCR7dGhpcy5uYW1lfT4gZG9lc24ndCBhbGxvdyB0aGUgdmFsdWUgPCR7dmFsdWV9PmApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIG5vdygpOiBEYXRldGltZVZhbHVlT2JqZWN0IHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRldGltZVZhbHVlT2JqZWN0KG5ldyBEYXRlKERhdGUubm93KCkpLnRvSVNPU3RyaW5nKCkpO1xuICAgIH1cblxuICAgIHRvU2Vjb25kcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gbW9tZW50KHRoaXMudmFsdWUpLnVuaXgoKTtcbiAgICB9XG59XG4iXSwidmVyc2lvbiI6M30=